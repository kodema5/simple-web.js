(function(simpleWeb){'use strict';const global=window;

// for UI (View/Controller) code

let api /* == web.api object */ = simpleWeb.setApi({
    'user.signon': {
        url: '/httpbin/post',
        input: (a) => ({cmd:'signon', ...a}),
        output: async (r) => {
            simpleWeb.setState('user.signed_on', true);
            simpleWeb.setState('ajax.headers', {
                'Authorization': 'Bearer (jwt)'
            });
            return r
        }
    },

    'user.signoff': {
        url: '/httpbin/post',
        input: (a) => ({cmd:'signoff', ...a}),
        output: async (a) => {
            simpleWeb.clearState();
            return a
        }
    }
});


const App = (props) => {

    const [signedOn, setSignedOn] = simpleWeb.useState(simpleWeb.getState('user.signed_on'));

    return simpleWeb.html`

    <div class="container">
    <div class="row">
    <div class="col-12">

    <div class="alert alert-primary" role="alert">
    <i class="bi-alarm" style="font-size: 2rem; padding-right:10px"></i>
    ${signedOn ? 'signed-on, thank you!' : 'please, sign on'}
    </div>

    ${!signedOn&& simpleWeb.html`
        <form id="form1">
        <div class="mb-3">
            <label class="form-label">User Id</label>
            <input name="user_id" type="text" class="form-control" />
        </div>
        <div class="mb-3">
            <label class="form-label">Password</label>
            <input name="user_pwd" type="password" class="form-control" />
        </div>
        <button type="button"
            class="btn btn-primary"
            data-form-id="form1"
            onClick=${async (e) => {
                let id = e.target.dataset.formId;
                let fe = document.getElementById(id);
                let f = new FormData(fe);
                let a = Object.fromEntries(f.entries());
                let r = await api.user.signon(a);

                setSignedOn(true);

                let log = document.getElementById('log');
                log.innerHTML = JSON.stringify(r, null, 2);

            }}
        >Sign-on</button>
        </form>`
    }

    ${signedOn && simpleWeb.html`
        <button type="button"
            class="btn btn-primary"
            data-form-id="form1"
            onClick=${async (e) => {
                setSignedOn(false);
                let r = await api.user.signoff();

                let log = document.getElementById('log');
                log.innerHTML = JSON.stringify(r, null, 2);
            }}
        >Sign-off</button>
        `
    }


    </div></div>

    <div class="row"><div class="col-12"><pre id="log"></pre></div></div>
    </div>
    `
};

simpleWeb.render(simpleWeb.html`<${App} name="xxx" />`, document.getElementById('root'));}(web));//# sourceMappingURL=example.min.js.map
