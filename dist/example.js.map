{"version":3,"file":"example.js","sources":["../example/index.js"],"sourcesContent":["// for UI (View/Controller) code\r\n\r\nimport  {\r\n    html, render,\r\n    useState,\r\n    setApi,\r\n    setState, getState, clearState,\r\n} from 'simple-web'\r\nimport { ContextExclusionPlugin } from 'webpack'\r\n\r\nlet api /* == web.api object */ = setApi({\r\n    'user.signon': {\r\n        url: '/httpbin/post',\r\n        input: (a) => ({cmd:'signon', ...a}),\r\n        output: async (r) => {\r\n            setState('user.signed_on', true)\r\n            setState('ajax.headers', {\r\n                'Authorization': 'Bearer (jwt)'\r\n            })\r\n            return r\r\n        }\r\n    },\r\n\r\n    'user.signoff': {\r\n        url: '/httpbin/post',\r\n        input: (a) => ({cmd:'signoff', ...a}),\r\n        output: async (a) => {\r\n            clearState()\r\n            return a\r\n        }\r\n    }\r\n})\r\n\r\n\r\n\r\nexport const App = (props) => {\r\n\r\n    const [signedOn, setSignedOn] = useState(getState('user.signed_on'))\r\n\r\n    return html`\r\n\r\n    <div class=\"container\">\r\n    <div class=\"row\">\r\n    <div class=\"col-12\">\r\n\r\n    <div class=\"alert alert-primary\" role=\"alert\">\r\n    <i class=\"bi-alarm\" style=\"font-size: 2rem; padding-right:10px\"></i>\r\n    ${signedOn ? 'signed-on, thank you!' : 'please, sign on'}\r\n    </div>\r\n\r\n    ${!signedOn&& html`\r\n        <form id=\"form1\">\r\n        <div class=\"mb-3\">\r\n            <label class=\"form-label\">User Id</label>\r\n            <input name=\"user_id\" type=\"text\" class=\"form-control\" />\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <label class=\"form-label\">Password</label>\r\n            <input name=\"user_pwd\" type=\"password\" class=\"form-control\" />\r\n        </div>\r\n        <button type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            data-form-id=\"form1\"\r\n            onClick=${async (e) => {\r\n                let id = e.target.dataset.formId\r\n                let fe = document.getElementById(id)\r\n                let f = new FormData(fe)\r\n                let a = Object.fromEntries(f.entries())\r\n                let r = await api.user.signon(a)\r\n\r\n                setSignedOn(true)\r\n\r\n                let log = document.getElementById('log')\r\n                log.innerHTML = JSON.stringify(r, null, 2)\r\n\r\n            }}\r\n        >Sign-on</button>\r\n        </form>`\r\n    }\r\n\r\n    ${signedOn && html`\r\n        <button type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            data-form-id=\"form1\"\r\n            onClick=${async (e) => {\r\n                setSignedOn(false)\r\n                let r = await api.user.signoff()\r\n\r\n                let log = document.getElementById('log')\r\n                log.innerHTML = JSON.stringify(r, null, 2)\r\n            }}\r\n        >Sign-off</button>\r\n        `\r\n    }\r\n\r\n\r\n    </div></div>\r\n\r\n    <div class=\"row\"><div class=\"col-12\"><pre id=\"log\"></pre></div></div>\r\n    </div>\r\n    `\r\n}\r\n\r\nconst getTargetId = () => {\r\n    try {\r\n        let el = document.currentScript\r\n        return el.dataset.targetId\r\n    } catch(x) {\r\n    }\r\n}\r\n\r\n\r\nrender(html`<${App} name=\"xxx\" />`, document.getElementById(getTargetId() || 'root'))\r\n\r\n"],"names":["setApi","setState","clearState","useState","getState","html","render"],"mappings":";;;;;IAAA;AASA;IACA,IAAI,GAAG,2BAA2BA,gBAAM,CAAC;IACzC,IAAI,aAAa,EAAE;IACnB,QAAQ,GAAG,EAAE,eAAe;IAC5B,QAAQ,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;IAC5C,QAAQ,MAAM,EAAE,OAAO,CAAC,KAAK;IAC7B,YAAYC,kBAAQ,CAAC,gBAAgB,EAAE,IAAI,EAAC;IAC5C,YAAYA,kBAAQ,CAAC,cAAc,EAAE;IACrC,gBAAgB,eAAe,EAAE,cAAc;IAC/C,aAAa,EAAC;IACd,YAAY,OAAO,CAAC;IACpB,SAAS;IACT,KAAK;AACL;IACA,IAAI,cAAc,EAAE;IACpB,QAAQ,GAAG,EAAE,eAAe;IAC5B,QAAQ,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;IAC7C,QAAQ,MAAM,EAAE,OAAO,CAAC,KAAK;IAC7B,YAAYC,oBAAU,GAAE;IACxB,YAAY,OAAO,CAAC;IACpB,SAAS;IACT,KAAK;IACL,CAAC,EAAC;AACF;AACA;AACA;AACY,UAAC,GAAG,GAAG,CAAC,KAAK,KAAK;AAC9B;IACA,IAAI,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAGC,kBAAQ,CAACC,kBAAQ,CAAC,gBAAgB,CAAC,EAAC;AACxE;IACA,IAAI,OAAOC,cAAI,CAAC;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAE,QAAQ,GAAG,uBAAuB,GAAG,iBAAiB,CAAC;AAC7D;AACA;AACA,IAAI,EAAE,CAAC,QAAQ,GAAGA,cAAI,CAAC;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,EAAE,OAAO,CAAC,KAAK;AACnC,gBAAgB,IAAI,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,OAAM;AAChD,gBAAgB,IAAI,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,EAAC;AACpD,gBAAgB,IAAI,CAAC,GAAG,IAAI,QAAQ,CAAC,EAAE,EAAC;AACxC,gBAAgB,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,EAAE,EAAC;AACvD,gBAAgB,IAAI,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC;AAChD;AACA,gBAAgB,WAAW,CAAC,IAAI,EAAC;AACjC;AACA,gBAAgB,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAC;AACxD,gBAAgB,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAC;AAC1D;AACA,aAAa,CAAC;AACd;AACA,eAAe,CAAC;AAChB,KAAK;AACL;AACA,IAAI,EAAE,QAAQ,IAAIA,cAAI,CAAC;AACvB;AACA;AACA;AACA,oBAAoB,EAAE,OAAO,CAAC,KAAK;AACnC,gBAAgB,WAAW,CAAC,KAAK,EAAC;AAClC,gBAAgB,IAAI,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,GAAE;AAChD;AACA,gBAAgB,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAC;AACxD,gBAAgB,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAC;AAC1D,aAAa,CAAC;AACd;AACA,QAAQ,CAAC;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;IACL,EAAC;AACD;IACA,MAAM,WAAW,GAAG,MAAM;IAC1B,IAAI,IAAI;IACR,QAAQ,IAAI,EAAE,GAAG,QAAQ,CAAC,cAAa;IACvC,QAAQ,OAAO,EAAE,CAAC,OAAO,CAAC,QAAQ;IAClC,KAAK,CAAC,MAAM,CAAC,EAAE;IACf,KAAK;IACL,EAAC;AACD;AACA;AACAC,oBAAM,CAACD,cAAI,CAAC,CAAC,EAAE,GAAG,CAAC,cAAc,CAAC,EAAE,QAAQ,CAAC,cAAc,CAAC,WAAW,EAAE,IAAI,MAAM,CAAC;;;;;;;;;;;;"}